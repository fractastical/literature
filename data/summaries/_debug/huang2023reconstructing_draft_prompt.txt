=== IMPORTANT: ISOLATE THIS PAPER ===
You are summarizing ONLY the paper below. Do NOT reference or use content from any other papers.
Do NOT mix information from different papers. Only use information from THIS specific paper.

Paper Title: Reconstructing human activities via coupling mobile phone data with location-based social networks
Citation Key: huang2023reconstructing
Authors: Le Huang, Fan Xia, Hui Chen

REMEMBER: Extract quotes, claims, and findings ONLY from the paper text provided below.

Year: 2023

Key Terms: phone, location, china, shanghai, university, coupling, activities, reconstructing, data, social

=== FULL PAPER TEXT ===

TravelBehaviourandSociety33(2023)100606
Contents lists available at ScienceDirect
Travel Behaviour and Society
journal homepage: www.elsevier.com/locate/tbs
Reconstructing human activities via coupling mobile phone data with
location-based social networks
Le Huanga,b,1, Fan Xiac,1, Hui Chenc, Bowen Hud, Xiao Zhouf, Chunxiao Lie,*, Yaohui Jina,b,*,
Yanyan Xua,b,*
aMoE Key Laboratory of Artificial Intelligence, AI Institute, Shanghai Jiao Tong University, Shanghai 200240, China
bData-Driven Management Decision Making Lab, Shanghai Jiao Tong University, Shanghai 200030, China
cSchool of Information Science and Technology, Shandong University, Qingdao 266237, China
dTechnology R&D Department, Data Intelligence Division, China Unicom Digital Technology Co., Ltd., Beijing 100166, China
eAntai College of Economics and Management, Shanghai Jiao Tong University, Shanghai 200030, China
fGaoling School of Artificial Intelligence, Renmin University of China, Beijing 100872, China
A R T I C L E I N F O A B S T R A C T
Keyword: In the era of big data, the ubiquity of location-aware portable devices provides an unprecedented opportunity to
Human activity understand inhabitants’ behavior and their interactions with the built environments. Among the widely used
Activity inference data resources, mobile phone data is the one passively collected and has the largest coverage in the population.
Mobile phone data
However, mobile operators cannot pinpoint one user within meters, leading to the difficulties in activity infer-
Location-based social networks
ence. To that end, we propose a data analysis framework to identify user’s activity via coupling the mobile phone
Bayesian inference
Topic model data with location-based social networks (LBSN) data. The two datasets are integrated into a Bayesian inference
module, considering people’s circadian rhythms in both time and space. Specifically, the framework considers
the pattern of arrival time to each type of facility and the spatial distribution of facilities. The former can be
observed from the LBSN Data and the latter is provided by the points of interest (POIs) dataset. Taking Shanghai
as an example, we reconstruct the activity chains of 1,000,000 active mobile phone users and analyze the
temporal and spatial characteristics of each activity type. We assess the results with some official surveys and a
real-world check-in dataset collected in Shanghai, indicating that the proposed method can capture and analyze
human activities effectively. Next, we cluster users’ inferred activity chains with a topic model to understand the
behavior of different groups of users. This data analysis framework provides an example of reconstructing and
understanding the activity of the population at an urban scale with big data fusion.
1. Introduction 2020; Kraemer et al., 2020; Mistry et al., 2021; Aleta et al., 2020). The
traditional collection methods are completed through questionnaire
As the population explodes in urban areas, people are increasingly surveys. These methods are only applicable to small samples. In addition
aware of the complexity and importance of human mobility. Specif- to being difficult to update, they are time-consuming and costly.
ically, human mobility data is of great significance in assisting urban Moreover, the questionnaire surveys are usually collected by users
planning (Batty et al., 2012; Hu et al., 2019; Xu et al., 2020; Jiang et al., recalling their trips on the day, so the specific time of the trip is not
2016), traffic control and travel behavior management (Tu et al., 2020; accurate and some unobtrusive small trips may likely be missed
Pan et al., 2013; Xu and Gonza´lez, 2017; Xu et al., 2018), social (McDonald, 2008). With the development of information and commu-
governance (De Nadai et al., 2020; Xu et al., 2019), and discovering the nication technologies (ICTs), the ubiquity of mobile devices and
influence of natural disasters (Yin et al., 2020), etc. Modeling of human location-based services have provided more channels for the collection
mobility also plays a crucial role in the control of COVID-19, from the of individual trajectories, such as geo-information on social networks
initial spreading stage to the economic reopening stages (Chang et al., (Liu et al., 2021), location data in mobile phones (Sagl et al., 2014,
* Corresponding authors.
E-mail addresses: chunxiao@sjtu.edu.cn (C. Li), jinyh@sjtu.edu.cn (Y. Jin), yanyanxu@sjtu.edu.cn (Y. Xu).
1 These authors contributed equally in this work.
https://doi.org/10.1016/j.tbs.2023.100606
Received 3 December 2022; Received in revised form 9 May 2023; Accepted 19 May 2023
2214-367X/©2023HongKongSocietyforTransportationStudies.PublishedbyElsevierLtd.Allrightsreserved.
L. Huang et al. T r a v e l B e h a v i o u r a n d S o c i e ty33(2023)100606
Trip
sequence
CDRs Pre-processing Stay detection
Stay labelling
(H,W,O)
Foursquare POIs and Activity Validation Dianping
Bayes
LBSN data check-in time inference LSBN data
Analysis
Shanghai POIs
Spatio-temporal Activity chain
patterns patterns
Data sources Topic model
Intermediate results Activity Arrival time Time use Professions of (LDA)
& time & duration statistic commuters
Models
Output
Lifestyle
Fig. 1. Pipeline of the proposed data analysis framework. Cells in green refer to the original input data; cells in yellow refer to the intermediate results; cells in
orange refer to the methods, including the stay detection, the Bayesian inference model and so on.
2016, 2013, 2016), GPS trajectories (Siła-Nowicka et al., 2016), smart we devise a Bayesian model to reconstruct the activity chains via
public transportation cards (Long et al., 2012), credit cards (Clemente coupling the stay locations with the POI information and visitation
et al., 2018), and taxis (Xu et al., 2021; Hu et al., 2021). Long et al. pattern, extracting from the LBSN data. The reconstruction results are
combined the bus smart card data and the land use map to analyze the compared with a real-world dataset collected by Dianping (Dianping,
jobs-housing places and commuting patterns (Long et al., 2012). Hu 2022), an online platform for discovering local businesses and services
et al. modeled the relationship between urban functional structure and in China. The validation results show that our model can effectively
traffic spatial interaction to classify urban functions at the road segment capture the laws of human activities on a large scale. After that, we
level (Hu et al., 2021). analyze the spatio-temporal patterns of their activity behavior.
Each type of data has its own shortcomings. The social network data Compared with the American Time Use Survey (ATUS), we find that the
are actively shared by the users and they do not always check in at every inhabitants in Shanghai devote more time to work than Americans and
visited location. That is, the social network data can not collect the they have more involvement in activities at home than outdoors. We
continuous sequence of individual mobility behavior. In addition, social also use a topic model to classify the users into six groups based on the
network data can not uniformly cover the population due to the various patterns of their inferred activity chains and analyze their behavior
popularity of location-aware applications in different ages. In contrast, characteristics of each type. Overall, the key contribution of our study is
mobile phone data can record a user’s continuous movement behavior the new data analysis framework that can assist in modeling human
but the recorded locations are derived from the interacted base stations activity patterns at an urban scale with big data fusion, providing the
rather than the actual location. The covering radii of base stations range basis for developing smart cities. The complete data analysis framework
from 50 meters in crowded urban regions to about 300 meters in rural is presented in Fig. 1, including data sources in green cells, intermediate
areas, indicating that we can not directly identify the users’ activity from results in yellow cells, key algorithms in orange cells, and results in
the mobile phone data. purple cells.
Targeting inferring the activity type of each individual mobile phone
user, we desire to consider not only the possible activities in the area 2. Related work
covered by the interacted base station but also the pattern of the
attractiveness of different types of facilities. To this end, we couple 2.1. Social network data and mobile phone data analysis
mobile phone data with two other datasets, POI data, and LBSN data.
The POI dataset provides the longitude, latitude, and type of each fa- In the information era, with the popularity of location-based services
cility, implying the association between the semantic and spatial infor- on personal mobile phones, people can share their current Location
mation. The LBSN dataset provides the attractive flow of each type of anytime and anywhere, forming location-based social networks (LBSN).
facility every timeslot (e.g., 15 min, 1 h), implying the association be- Typical LBSN data, including Foursquare and Dianping, record the
tween the semantic and temporal information. Through integrating anonymized user ID, timestamp, location, and the visited facility in each
these datasets, we are able to consider both temporal and spatial con- item, providing an opportunity to understand the interaction between
straints. To this end, we propose a Bayesian inference model to assign a the population and the built environments (Huang and Wong, 2016; Tu
possibility to each activity type given a user’s arrival time and desti- et al., 2017; Hasan et al., 2013; Calafiore et al., 2021; Gao et al., 2017).
nation. Taking Shanghai as an example, we leverage the anonymized Using the Twitter data for Washington, DC, Huang et al. introduced an
mobile phone data of 1,000,000 residents during two weeks. The mobile approach to analyzing the activity patterns with different socioeconomic
operator records not only the call detail but also the usage of internet statuses (Huang and Wong, 2016). Via combining the Foursquare and
data, namely XDRs. For each user, we first detect significant stay loca- Twitter data, Hasan et al. found that people tend to select places with
tions via clustering the records in space with her raw XDR traces, and diminishing probability following a Zipf’s law (Hasan et al., 2013).
next label these stay locations as home, work (if available), or other. Then Using Foursquare to provide insight into the urban structure, Calafiore
2
L. Huang et al. T r a v e l B e h a v i o u r a n d S o c i e ty33(2023)100606
Fig. 2. Statistic characteristics of the XDRs
data and the estimated travel demand. (A)
Number of records of raw data in each hour
during one weekday. (B) Distribution of the
number of records per user per day. (C) Dis-
tribution of the time interval between two
consecutive records of the same user. (D) Dis-
tribution of the number of daily visited loca-
tions, following a log-normal distribution.
Mobile phone users visit nearly 5 locations per
day on average. (E) Distribution of the number
of daily travel distances, following a log-
normal distribution. The average daily travel
distance is 5.75 km in Shanghai. (F) Fraction of
e x e x travel demands of different trip purposes by
x x the hour including home-based work (HBW),
home-based other (HBO), and non-home based
(NHB) on weekdays. HBW trips display clearly
peaks during the morning and evening
commuting hours. (G) Visualization of travel
flow during the morning peak hours on one
typical weekday.
0.5% and above
0.3% - 0.5%
0.15% - 0.3%
0.01% - 0.15%
et al. create a framework for the identification of urban functions (Cal- is to randomly select one facility or point of interest (POI) from those
afiore et al., 2021). As mentioned before, the social networks data can located in the Voronoi polygon of the interacted base station. Such a
only represent the behavior of a group of the population who frequently method neglects the heterogeneous visitation patterns of different types
use social media platforms. of facilities. For instance, restaurants always attract large customer
The mobile phone data, e.g., call detail records (CDRs) and x-detail flows during the noon and evening peak hours, while the shopping malls
records (XDRs), record the base stations used by the phone users when attract more customers on weekends and holidays. Therefore, there is a
they are making phone calls, sending or receiving messages, or using the must to consider the attractiveness of different types of facilities. Xie
data-channel, and thus pinpoint users with the locations of base stations. et al. proposed to infer the activity type by associating the activity area
The mobile phone data are passively collected by the mobile operators with POIs according to the distance between them (Xie et al., 2009).
and cover a very large proportion of the population. There are a number Researchers assumed that the nearer the POI locates to the user, the
of examples analyzing mobile phone data to study human mobility larger probability of the facility the user engaged in Wang (2012), Zhao
(Jiang et al., 2016; Sevtsuk and Ratti, 2010), daily rhythms (Monsivais et al. (2015). Besides, researchers also used L´evy model (Rhee et al.,
et al., 2017; Roy et al., YYYY), social network analysis (Fudolig et al., 2011) or gravity model (Goh et al., 2012) to infer the probability of users
2020; Fudolig et al., 2021) and urban spatial structure (Louail et al., accessing various types of POIs. On the other hand, time constraints also
2015; Lenormand et al., 2015). Jiang et al. presented a mechanistic play important roles in inhabitants’ activities and have been combined
modeling framework to analyze the individual daily mobility including with space constraints to infer individuals’ activity types (Aslam et al.,
stay duration and daily mobility motif distribution (Jiang et al., 2016). 2020; Zhao et al., 2020). For example, if the arrival time is beyond the
Via studying the mobile calling activity, Monsivais et al. found that the opening hours of a shopping mall, the visit probability of the mall will be
length and timings of urban daily rhythms sensitively depend on the nearly zero. But this requires the complete opening hours information
seasonal changes of sunlight (Monsivais et al., 2017). Sagl et al. about the POI. Moreover, the rhythm of daily life also impacts the
employed the self-organizing map (SOM) approach to promote the attractiveness of each type of POI (Spinsanti et al., 2010). Gong et al.
exploration of collective human activity, such as the spatial variations in inferred the activity types based on the variations in probability of
intensity and similarity (Sagl et al., 2014). population’s activity within a day (Gong et al., 2016). However, for the
mobile phone data, we can only localize the users in the area sur-
rounding the base station, which covers various types of facilities. These
2.2. Human activities distance-based methods can not be directly used to infer individuals’
activity types. The surrounding environment is also an important factor
Mobile phone data is one of the largest data resources depicting in detecting activity types. Recent methods infer the activity of users
human mobility behavior in terms of its coverage, but it presents chal- with their trajectory similarities to the ones with known activities (Liu
lenges when attempting to infer user activity because of the coarse et al., 2021; Cai et al., 2016). Such methods require a large number of
localization of individual users. To curb this challenge, a naive solution
3
L. Huang et al. T r a v e l B e h a v i o u r a n d S o c i e ty33(2023)100606
Table 1 temporal distribution of raw XDRs. Fig. 2B presents the distribution of
Mapping of the activity types, primary POIs, Foursquare and ATUS. the number of daily records, suggesting most users have 30(cid:0) 50 records
Activity Primary POIs Foursquare ATUS every day. Fig. 2C presents the distribution of time intervals between
types two consecutive records of the same user. The XDRs collect most users’
locations within a few hours, although some time intervals are large. To
Shopping Shopping, Car Store, Purchasing goods
service Bookstore, …, and service filter out the days with too sparse records, we split the entire day into 48
Bookstore, Shop timeslots and eliminate the days if less than 12 timeslots are with records
Daily life Banks, Hospitals, Office, Organizational, (Widhalm et al., 2015).
Religion Government Civic, Religious
The POI dataset adopted in this work contains more than 30,000
Building, bank, activities
Church, …, POIs in Shanghai (Long, 2016; Jin et al., 2017). The POIs are grouped
Medical Center, into 7 categories, including shopping, education, leisure & sport, drink &
Temple eat, daily life, transport, and other. For each mobile phone user, we keep
Transport Transportation, Airport, Bus – their work, home as two additional POI labels. It is noteworthy that,
Railway station, Station, Train
…, Airport Station, Subway, because we do not have access to the full-version check-in data of in-
…, Ferry, Light dividual users in Shanghai, we utilize the Foursquare check-in data in
Rail Tokyo to derive the visitation pattern of various types of POIs, under the
Drink & Catering services Restaurant, Eating and assumption that inhabitants in Shanghai and Tokyo share similar life-
Eat Caf´e, Diner, …, drinking
styles. Our proposed method has potential to be further refined with
Bakery,
Breakfast Spot sufficient data available in the same region. The Foursquare data in
Leisure & Recreation, Park, Bar, Gym, Leisure and Tokyo collected over 570,000 check-ins during 10 months from April
Sport Travel Fitness Center, sports 2012 to February 2013 (Yang et al., 2014). Each record includes a
…, Hotel, Movie timestamp, longitude and latitude coordinates, and an activity type.
Theater, General
In addition, owing to the difference in mobility behavior between
Education Research related, College, Educational
Culture related, University, …, activities visitors and local inhabitants, the possible visitors are eliminated in the
School School, Library Foursquare data via removing the users whose timespans between the
Home Housing estate Home (private), Personal care, …, first and last check-in records are less than two weeks. For the sake of
Residential Household
simplicity, we manually match the activity types in Shanghai POIs and
Building activities
Foursquare data with our self-defined types, as illustrated in Table 1.
Work Work location Factory, Working and
Professional work-related
Places activities 4. Mobile phone data processing and stay labeling
Other Other facilities, Building, City, Other activities,
Building Bridge, …, …, Telephone
4.1. Stay detection with spatial clustering
Moving Target, calls
Event Space
Stay points denote locations where the users have stayed for a while
such as schools and offices. Li et al. proposed the stay point detection
labeled trajectories to achieve satisfying performance. In addition, re-
algorithm that if the distance between a point and its successors is larger
searchers have introduced data analyzing models to understand the
than the threshold, they measured the time span between the first point
activity types. For instance, the principal component analysis (PCA) is
and the last successor (Li et al., 2008). If the time span is larger than the
used to identify the main components of daily activities (Eagle and
time threshold, the points are labeled stay.
Pentland, 2009). In recent years, the latent Dirichlet allocation (LDA)
In the vast majority of cases, the users interact with the nearest base
model has also played a great role in inferring activity patterns (Zhao
station. However, when the nearest base station is fully occupied, new
et al., 2020; Zhao et al., 2018) and identifying major crowd behaviors
connections will be assigned to his/her second nearest station. This
that recur over time (Ferrari et al., 2011).
reassignment results in the mismatching between users and base stations
in space. Therefore, when detecting people’s stay points, we take such
3. Datasets description and processing procedure particularity of base station data into account. We first cluster the users’
footprints using the DBSCAN algorithm within a certain period,
This work integrates massive mobile phone data, POI data, and LBSN respecting the chronological order, to filter out the sudden changes in
data to understand the interaction between the inhabitants and the fa- location. The footprints belonging to each cluster are replaced by the
cilities in a big city, Shanghai, China. Call detail records (CDRs) and location of the cluster center. The spatial threshold of DBSCAN is set as
various data records (XDRs) are two typical mobile phone data used to 50m in our experiments in Shanghai. After removing the noises in users’
study the mobility behavior of the population. CDRs collect the time and trajectories, we identify the significant locations via another DBSCAN
location of the interactions between users and the base stations when algorithm to cluster the active locations ignoring their arrival time and
they are making phone calls, sending or receiving text messages. XDRs label the clusters as stay or pass-by. Users engage in activities at stay
additionally collect the internet data accessing activities, recording locations and transfer between activities at pass-by locations. The stay
more consecutive mobility traces of users. The XDRs data used for this detection algorithm is shown in Algorithm1. Stays are distinguished
study are collected from 1,000,000 anonymized users in Shanghai for 2 from pass-bys based on the temporal and spatial thresholds set as 10min
weeks in January 2014, containing approximately 566 million records and 300m in our experiments in Shanghai. Stay locations are identified
in total. On average, each person has 40 records per day. In this work, we as the regions where a user has stayed over a certain time interval within
focus on the human behavior on weekdays, thus the records of the one place. By doing so, the points within a certain distance are recog-
weekends are eliminated. Each record in XDRs contains an anonymous nized as the same active significant place. The users’ mobility traces are
user ID, the time at the instance of the phone activity, the longitude and further updated via filling up the significant places, namely the activity
latitude of the interacting base station. Fig. 2A-C illustrate the basic
statistics of the phone usage behavior in XDRs. Fig. 2A shows the
4
L. Huang et al. T r a v e l B e h a v i o u r a n d S o c i e ty33(2023)100606
0 - 3,300
3,300 - 6,600
6,600 - 9,900
9,900 - 13,200
13,200 - 16,400
Fig. 3. Spatial distribution of home locations of the mobile phone users in XDRs (A) and the population from 6th national census data in 2010 (B) by
Jiedao. The users’ address in XDRs depends on the inferred home. The shade color from dark to light corresponds to the population from more to less.
chain. 4.2. Stay labelling to identify significant places
Algorithm1: Stay detection
1: Luc[],j←1,i←1,C←[] People engage in daily activities with certain regularity. Having
2: add r1 to C completed the detection for stay and pass-by locations, we further label
3: for i←2 to N do the stays with semantic information, such as home, work, and other. Most
4: if (ti (cid:0) tj )⩽10min then ▹Time interval less than 10 min research employs simple rules for home detection, which are mainly
5: add ri to C
divided into two categories. Usually, home is identified as the location
6: else
with the most records during the night or the location that has the most
7: add C to Lu
8: C←[] records above a predefined threshold (Jain et al., 1999; Tizzoni et al.,
9: j←i 2014). In this work, we consider the daily life habits. That is, the in-
10: add ri to C habitants prefer to stay at home during the night of weekdays and
1 1 1 2 : : for C m C ← in D L B u S C d A o N(eps=0.05,min-sample=2,C) daytime during weekends or stay at offices during working hours on
13: for each cluster D in Cm do weekdays. Therefore, we assume the frequently visited location from
▹Loops through each cluster in the records within 10 min 22:00 to 6:00 every day as her or his home. If the user visits the identified
14: the location of cluster Dx ,Dy =Med(xd ,yd ) home less than 30% of the total number of records, we remove this user
▹Update locations by the medoid of locations in each cluster
as she/he probably be a temperate visitor to the city. Thus, the users
1 1 6 5 : : Lm = up D d B a S t C e A lo N c ( a e t p i s on = : x 0 d . , 0 y 5 d ,m = in D -s x a , m Dy p le=1,Lu ) refer to residents if not specially illustrated in the following context. We
17: for each cluster U in Lm do compared the spatial distribution of the home locations of the active
18: the location of cluster Ux ,Uy =Med(xd ,yd ) ▹Update locations by the mobile phone users in XDRs and the population distribution from the 6th
medoid of locations in each cluster national census data in 2010, as shown in Fig. 3. The number of users in
19: update location: xd ,yd =Ux ,Uy
XDRs is evenly distributed to the population distribution of Shanghai by
20: j←1,i←1
21: for i←1 to N do ▹Loops through each record of one user Jiedao, reflecting the reliability of the data sources we adopt. Similarly,
22: if xi ,yi =xj ,yj then we label the most frequently visited place between 8:00 and 18:00 on
23: j←j+1 weekdays as work. Note that if the identified work place is less than
24: else 0.5km from home or visited less than twice a week, the user probably not
25: if tj (cid:0) ti ⩾10min then ▹Time interval more than 10 min
be a commuter and the stay location is labeled as other. The remaining
26: la←stay
27: i←j unidentified stay locations are classified as other.
28: else Next, according to the availability of the work place, we group resi-
29: la←pass-by dents into commuters and non-commuters because of their obviously
30: i←j different mobility behavior. After the types of stay locations are identi-
fied, we can further label their trips into three categories, (i) home-
We next present the distribution of the number of visited locations based-work (HBW), representing the trips between home and work
per user per day in Fig. 2D. The distribution matches well with a log- places; (ii) home-based-other (HBO), representing the trips between
normal function with the mean value equal to 4.76, suggesting the home and other places; (iii) non-home-based (NHB), representing the
users visited nearly 5 places per day on average. As we have derived the trips between two other places or between work and other places. Fig. 2F
stay places for each user, the travel distance between two locations is depicts the fraction of hourly trips in these three categories. The peak
then calculated with the Euclidean distance. By assuming all residents and trough of HBW travel demand are very pronounced in the curve, and
start their trips from home and back home at the end of the day, we are the two peaks correspond to the morning and evening commuting peak
able to estimate their daily travel distances. Fig. 2E depicts the distri- hours.
bution of users’ daily travel distance. It also follows a log-normal dis- Fig. 4 illustrates the joint distribution of the arrival time and stay
tribution with the average travel distance equal to 5.75 km. Fig. 2G duration for home, work, and other. For both commuters and non-
shows the spatial distribution of travel flow above 0.01% of total de- commuters, there are two main clusters in home. The lower cluster
mand during the morning peak hours on one typical weekday. represents the activities at home during the daytime, and the upper
cluster indicates the activities during the night. The upper tilts to the
lower right, suggesting that the later the user arrives home, the less time
they will stay. Compared with commuters, the lower in the home
5
TravelBehaviourandSociety33(2023)100606
Arrival time
Fig. 5. Traveler’s activity reconstruction with
Bayesian inference and the LBSN data. (A) Distri-
bution of the arrival time of various types of activity
LBSN data, which are collected from Foursquare
check-ins in Tokyo. The temporal granularity is 15
min. (B) Selection of the candidate POIs for the
Bayesian inference framework. The solid black poly-
gons present the Voronoi diagram of the base stations
(red dots). The blue dotted circle refers to the walk-
able space of the users. The grey shaded area shows
the selected region, in which all of the POIs (orange
stars) can be selected by the users visiting the target
base station. (C) Distribution of the arrival time of the
different types of activities estimated by coupling the
XDRs and LBSN data. It is worth noting that home and
Base station
work activities are inferred from daily habits, rather
Candidate POIs than Bayesian inference model.
Boundary of walkable space
Boundary of Voronoi
tessellation of Base station
activities of non-commuters is darker, showing that non-commuters stay and reduce at night. As to the work activity, from Fig. 4A, we can observe
much more time at home during the daytime than commuters. In the that work can be split into three hotspots. The lower two hotspots
distribution of other activities, we can observe a more evident peak in the represent the work with two time intervals, morning and afternoon
night for commuters than non-commuters, confirming the fact that because some works leave their workplace for a break in the noon. The
commuters only can spend a long-time on other activities at night. In upper hotspot indicates that the workers stay in the work place all day
contrast, the other activities of non-commuters increase during the day for about 8 h.
6
)rh(
noitaruD
Home
Arrival time
)rh(
noitaruD
Work
Arrival time
)rh(
noitaruD
Other
Arrival time
)rh(
noitaruD
Home
Arrival time
)rh(
noitaruD
L. Huang et al.
Other
Fig. 4. Joint distribution plot of the stay duration and arrival time of commuters (A) and non-commuters (B) for inferred activities from the XDRs data,
including home, work and other. Most of the stay duration at home of the commuters falls between 10 to 15 h. The typical stay duration at work is around 8 h. While
for the non-commuters, they often stay at home for a short time during the daytime.
L. Huang et al. T r a v e l B e h a v i o u r a n d S o c i e ty33(2023)100606
Fig. 6. Validation of inferred activities from Bayesian model with real-world data collected from Dianping for shopping (A) and drink & eat (B) type between
7:00 and 22:00. We compared the time distribution of these two types of activities with a time granularity of 10 min and calculated the reconstruction accuracy as
one minus mean absolute percentage error (MAPE) per hour. The dashed line represents the mean value of reconstruction accuracy. Our results demonstrate a high
level of consistency and reconstruction accuracy (around 80%) with real-world human behavior.
5. Activity inference with Bayesian estimation POIs locating around the users’ destinations. As shown in Fig. 5B, we
first select the candidate POIs (the orange stars) in the Voronoi polygon
Due to the rhythm of inhabitants’ daily lives, the temporal access of the base station visited by the user. To avoid selecting some distant
patterns differ across activity types. For example, the eating activities POIs locating in the polygons near the boundary of Shanghai, we also
have evident noon and evening peak hours compared to other activities. eliminate the ones outside the 900 meters buffer of the base station (the
On the other side, because of the coarse localization of mobile phone blue dashed circle). Let D=(c,t)denotes the activity with the propor-
data, we can only limit the possibly visited POIs within a polygon based tion c of the candidate POIs’ types and the time t. Next, given a set of
on the base station locations. Therefore, the choice of POI needs to POIs, we set the visit probability of the POI type Oi as p(Oi |c,t), where i =
consider both the POI density within the polygon and the access patterns 1,2,…,7, representing each activity type except home and work. Ac-
of different activity types. Here, we propose a Bayesian activity infer- cording to the Bayes theorem, the probability of visiting a certain POIs
ence model that relies on the distribution of POIs and the temporal type is
pattern of different activity types extracted from the LBSN data.
p(t|O,c)p(O|c)p(c)
p(O i |c,t)= i p(c,t) i . (1)
5.1. Bayesian activity inference model
It is assumed that the time and location of activity are independent of
We convert the activity type inference problem as estimating the each other, then p(t|Oi ,c) =p(t|Oi ). The probability of visiting a certain
probability of various activity types at the given arrival time and place. type of POIs can be simplified to:
The possible visited POIs, a.k.a. candidate POIs, are selected based on
p(t|O)p(O|c)
the Voronoi polygon of the base station. In practice, people display p(O i |c,t)= p i (t) i . (2)
different visitation patterns to various types of POIs. For instance, res-
taurants always have evident peaks during the evening hours, while
cultural facilities always attract more visitors on weekends. Fig. 5A
where p(Oi |c)represents the probability of selecting a certain POI type in
the case of the given distribution of all POI types in the activity region,
presents the temporal change of the attractiveness of different types of
POIs in the LBSN data. As expected, the vast majority of the activities
p(t|Oi )represents the temporal probability to visit a certain POI type,
and p(t)is the probability of accessing the timeslot t. Since we use a time
happen during the daytime; daily life, education, and work activities
display a high attractiveness during the morning hours; drink & eat and granularity of 10 min, there are a total of 144 timeslots in a day, i.e. p(t)
home show two evident peaks during the morning and evening hours; = 14 1 4 . The inferred activity type O* i can be further written as:
leisure & sport and shopping show evident peak during the evening hours. p(O i |c,t)∝p(t|O i )p(O i |c) (3)
On the other side, daily life, education, and work activities have a much
larger probability to be visited than the leisure & sport and shopping ac- O* i =argmax i p(t|O i )p(O i |c) (4)
tivities during the morning peak hours.
With consideration of such temporal inhomogeneity of visitation
patterns, our target is to estimate the conditional probability of various
7
TravelBehaviourandSociety33(2023)100606
calculating the time distribution of our reconstructed activities, we
consider the entire duration of the mobile user’s stay instead of just
arrival time since users may check in at any point during their stays.
In Fig. 6, we find that our reconstructed results are consistent with
real-world human behaviors. For shopping activities, the fraction grad-
ually increases in the morning hours and maintains a high level in the
afternoon and evening, gradually decreasing after 20:00. For drink & eat
activities, there are two obvious peaks in the check-in data at around
12:00 and 19:00, and our reconstruction results successfully captures
this pattern. Further, we calculate the mean absolute percentage error
(MAPE) per hour respectively and use one minus MAPE as a measure of
reconstruction accuracy. Both types of activities demonstrate high
reconstruction accuracy, around 80% in Fig. 6. Overall, our model can
effectively capture the patterns of human activity on a large scale.
6. Understanding the inferred activity patterns
After inferring and validating the activity types in the user trajec-
tories from mobile phone data, we conduct further analysis on the
reconstruction results to gain more insights into human activity
behavior. One such insight is the identification of spatio-temporal pat-
terns inherent in the inferred activities. Specifically, we utilize the
spatial information of work activities to infer the occupations of com-
muters, and use the temporal information to deduce the time use of
5.2. Validation of Bayesian activity inference results
Shanghai inhabitants. Additionally, we employ an LDA topic model to
explore varied activity sequences and gain an understanding of different
Fig. 5C illustrates the temporal distribution of each activity type after
lifestyles of Shanghai residents.
inferring the user activity of XDRs via combining LBSN data and POIs. As
can be seen, the temporal tendency of each activity after Bayesian
inference keeps in alignment with the original temporal distribution of 6.1. Spatio-temporal patterns of activities
Foursquare check-ins (Fig. 5A). For example, the drink & eat activities
have similar three peaks at 8:30, 12:30, and 20:30, corresponding to 6.1.1. Profession distribution of commuters
breakfast, lunch, and dinner time, respectively. The POIs and previously inferred work locations enable us to infer the
We validate our inferred human activities by comparing them commuters’ professions. Understanding the distribution of professions
against actual data collected from Dianping. Similar to Yelp or Four- facilitates further understanding of the economic structure and urban
square, Dianping allows users to “check-in” at businesses they visit, land use. With reference to the International Standard Industrial Clas-
reflecting the real activity type of the user at that time. The check-in data sification of All Economic Activities (ISIC) and the industry classification
we use includes anonymized user ID, the time and date of the check-in in the Third Shanghai Economic Census, we classify POIs into 14 groups
and the type of the business. Our primary objective is not only to corresponding to 14 categories of occupations. For example, IT includes
accurately predict individual activity types but, more importantly, to computer programming, the Internet and communications, etc; the so-
reconstruct overall patterns at a citywide level and better understand cial public includes health-related, government, environment-related,
human activity. On the other side, there is no activity records in our etc. Due to the limited information provided by POIs and XDRs, the
mobile phone datasets. Therefore, here we focus on validating whether possible occupations of commuters are only based on geographic loca-
the patterns we obtain are consistent with real-world behavior with tion and semantic. The candidate POIs for the profession are chosen with
Dianping data. the Voronoi of base stations belonging to the work location. The con-
Specifically, we collected users’ check-in records for shopping and ditional probability of profession inference can be inferred by the cat-
drink & eat respectively every January from 2014 to 2020, as our mobile egories’ proportion of the candidate POIs. When the POIs around the
phone data were collected in January. We then compare the time dis- work locations are hazy or missed, the profession may be difficult to
tribution of these two types of activities with our reconstructed results to infer. Occupation is inferred as other in two cases, the selected poi of the
see if our model can infer the true patterns of human activity. When work location is ambiguous or its category is other. As Fig. 7 presents the
proportions of commuters in different professions, the largest proportion
8
noitcarF
rehtO
elaS
erutcafunaM
gniretaC
tnemniatretnE
cilbup
laicoS
noitcurtsnoC
laicnaniF
noitacudE
noitatropsnarT
TI
tnemeganaM
stneR
&
sriapeR
erutlucirgA
L. Huang et al.
Fig. 7. Distribution of professions of all commuters after Bayesian inference. Sale is the top profession in Shanghai. Manufacture is the second top, closely
followed by catering.
Time (hr)
Fig. 8. Comparison of stay duration of each activity for the commuters
and non-commuters in the XDRs and the American Time Use Survey
(ATUS). Note that there is no Pass-by in the ATUS. The left and right panels
show the time use in U.S. and Shanghai, respectively. The non-commuters in
Shanghai stay at home for a longer time than people in the U.S. The commuters
in Shanghai stay longer time at both home and work than people in the U.S. In
contrast, people in the U.S. spend more time for Leisure&Sport than our XDR
users in Shanghai.
TravelBehaviourandSociety33(2023)100606
Arrival time
of commuters is actually unknown occupations. We compared the 6.1.2. Daily time use analysis
inferred results with the third Economic Census of Shanghai in 2013 Based on the inferred activity types, we also compare the average
(Bureau of Statistics of Shanghai, 2015). Among commuters whose oc- time use distribution with the American Time Use Survey (ATUS, (U.S.
cupations are inferred clearly, those in sales occupations accounted for Bureau of Labor Statistics, 2009)), as shown in Fig. 8. Covering 105
the largest proportion (close to 20%), consistent with the economic million U.S. households aged 15 and older, ATUS provides nationally
census, where the sales also accounted for the largest proportion representative estimates of how, where, and with whom Americans
(exceeding 15%). People working in social public accounted for 5.16% spend their time. The left and right panels of Fig. 8 present the time use
and those working in construction accounted for 4.4%, which is of different activities from ATUS and Shanghai, respectively. The darker
consistent with those in the economic census. In the Shanghai Economic and light colors present the time use behavior of commuters and non-
Census, 4.4% of people work in social public, and 3.9% of people work in commuters, respectively. The comparison shows that people in
real estate. Shanghai spend more time at home and work than U.S. people.
9
)rh(
noitaruD
Daily life
Arrival time
)rh(
noitaruD
Drink & Eat
Arrival time
)rh(
noitaruD
Education
Arrival time
)rh(
noitaruD
Leisure & Sport
Arrival time
)rh(
noitaruD
Arrival time
)rh(
noitaruD
Transport
Arrival time
)rh(
noitaruD
Pass-by
Arrival time
)rh(
noitaruD
)rh(
noitaruD
Daily life
Arrival time
)rh(
noitaruD
Drink & Eat
Arrival time Arrival time
)rh(
noitaruD
Education
Arrival time
)rh(
noitaruD
Leisure & Sport
Arrival time
)rh(
noitaruD
Shopping
Arrival time
)rh(
noitaruD
Transport
Arrival time
)rh(
noitaruD
Pass-by
Arrival time
)rh(
noitaruD
L. Huang et al.
Other Activity
Shopping Other Activity
Fig. 9. Joint distribution plot of duration and arrival time of the commuters (A) and non-commuters (B) for various activity types. The distributions of
arrival and duration agree well with the reality. For example, drink & eat, leisure & sport and shopping often start around 7:00 PM for commuters, while these activities
often start during the daytime for non-commuters.
TravelBehaviourandSociety33(2023)100606
Commuters in Shanghai work nearly 8 h per day on average, while afternoon. In contrast, the arrival time of non-commuters’ ranges from
people in the U.S. work around 6 h per day. We also observe that people morning to night. Non-commuters start education activities mainly
in Shanghai spend less time on entertainment and dining activities than around 9:00 and 13:00, matching real-life habits, while commuters start
Americans while spending the opposite amount of time on family ac- education activities mainly at 9:00 and 18:00. The reason for commuters
tivities. This indicates that Shanghai people prefer to engage in family having an evening start time could be due to the fact that after work,
activities than go out for socializing or entertainment during their free some may attend educational institutions to learn interest courses such
time. as dancing, musical instruments, etc. The availability of such courses in
To compare the temporal characteristics of various activities, in the evening follows their work schedule.
Fig. 9, we show the joint distribution of the duration and arrival time for We next examine the transition between different activities of the
different activities for commuters and non-commuters, respectively. inhabitants, as presented in Fig. 10. Fig. 10A and C show the activity
Most activities of commuters concentrate in some peak hours during one flow and transition matrix during the morning peak period respectively.
day. For example, commuters’ participation in leisure & sport or shopping Fig. 10A presents the average activity flow from 8:00 to 12:00 on
activities peaks at around 19:00, while non-commuters have frequently weekdays. The proportion of residents visiting the workplace from 8:00
activities from 12:00 to 20:00. Compared with commuters, non- to 10:00 increases significantly. At noon, a small fraction of workers
commuters start earlier and last longer when engaging in entertain- return home. The labels on the left side in Fig. 10C indicates the activity
ment activities. Commuters’ drink & eat activities have three clusters in users transit from and those on the bottom indicate the activity users
time, with peak hours at 8:00, 12:00, and 18:00, respectively corre- transit to. The activity with the highest percentage of departures is home
sponding to three meal times. However, non-commuters’ only has two and the most significant transition is from home to work during the
clusters with peak periods at 12:00 and 18:00, suggesting that com- morning peak hours. Fig. 10B and D show the activity flow and transi-
muters prefer to have breakfast outside than non-commuters. The tion matrix during the evening peak period, respectively. At 16:00, most
transport activity of commuters has two clusters with marked peaks, people are at work. A part of people leave work and move to other places
representing the trips to work in the morning and from work in the at 18:00. At 20:00, the probability of going home increases significantly,
10
morF
Proportion
of
activity
transition
To
morF
Proportion
of
activity
transition
L. Huang et al.
8:00 10:00 12:00 16:00 18:00 20:00
Home Home Home Home
Home
Home
Pass-by Pass-by
Pass-by Pass-by
Pass-by
Pass-by Work Work Work Work
Work
Other
Other Other Other Other
Work Other
Leisure & Sport Leisure D & a i S ly p o lif r e t Leisure D & a i S ly p o lif r e t Shopping Shopping Shopping
Daily life Transport Drink & Eat Leisure & Sport Leisure & Sport Leisure & Sport
Transport Drink & Eat Transport Transport Transport Drink & Eat
Drink & Eat Education Shopping Drink & Eat Drink & Eat Transport
E S d ho u p ca p t i i n o g n Shopping Education D Ed a u il c y a l t if i e on Ed D u a c il a y t i l o ife n Ed D u a c il a y t i l o ife n
To
Fig. 10. Transfers of population flow between different activities. (A-B) Population flow between different activities during the morning peak period (8:00 AM-
10:00 AM-12:00 AM), and evening peak period (4:00 PM-6:00 PM-8:00 PM). (C-D) Transfer matrices between different activities from 8:00 AM to 12:00 PM, and
from 4:00 PM to 8:00 PM.
L. Huang et al. T r a v e l B e h a v i o u r a n d S o c i e ty33(2023)100606
Group 0 Group 1 Group 2
Shopping Shopping Shopping
Home Drink & Eat Home Drink & Eat Home Drink & Eat
Other Education Other Education Other Education
Work Leisure & Sport Work Leisure & Sport Work Leisure & Sport
Transport Daily life Transport Daily life Transport Daily life
Group 3 Group 4 Group 5
Shopping Shopping Shopping
Home Drink & Eat Home Drink & Eat Home Drink & Eat
Other Education Other Education Other Education
Work Leisure & Sport Work Leisure & Sport Work Leisure & Sport
Transport Daily life Transport Daily life Transport Daily life
Fig. 11. The activity and trajectory characteristics of different groups of users after the classification by LDA. (A) Comparison of the proportion of different
types of activities in different groups. (B) Comparison of daily travel distances between users in different groups. (C) Comparison of the number of locations visited by
users in different groups.
but a few people are still at work. The most popular transition in the equivalent to a topic. Suppose there are M users and V activity types in
corresponding transfer matrix is from work to home. total, user m has Nm activity types in the activity sequence sm, where the
topic of the n-th activity amn is zmn. In the LDA model, the activity type in
6.2. Different patterns of activity chain with LDA model each category obeys a multinomial distribution sampled from the
→
Dirichlet prior distribution of the parameter β, and the category in each
→
6.2.1. LDA model and gibbs sampling time use sequence follows the same distribution with the parameter α.
The sequence of individual activity, a.k.a, activity chain, is an For each user’s activity sequence sm, its category distribution is:
important feature of daily lives, reflecting daily behaviors and habits. →
Further insight into the residents’ behavior characteristics provides a θ m =Dirichlet(α),
new opportunity for enriching the urban activity model. To this end, we
then,
use a topic model to classify users into different groups based on their
activity chains. Topic models are unsupervised machine learning models z mn =multi(θ m ),
used in natural language processing (NLP). These models are usually
used to discover topics that cannot be observed directly in texts. LDA Similarly, for each category k, its activity type distribution is:
(Blei et al., 2003) is one of the most widely used, assuming that each →
φ =Dirichlet(β),
document includes a fixed number of implicit topics, and the topics are k
represented by the word distribution. LDA aggregates the same words in
then,
a large number of documents, gives the topics in each document in the
form of the probability, and finally classifies the documents according to a =multi(φ ).
mn zmn
the topic distribution.
We regard the activity sequence S of each user as a document and the The probability that an activity type is initialized to d can be calculated
activity type A in each time interval as a word. Thus, the category Z is
11
L. Huang et al. T r a v e l B e h a v i o u r a n d S o c i e ty33(2023)100606
Fig. 12. Width of 75% confidence interval for different activity types from 7:00 to 22:00. Shopping activities have the narrowest confidence intervals, indicating
stable and consistent inferred results. During the night, daily life and education activities exhibit narrower confidence intervals compared to daytime. However, this
trend is reversed for drink & eat activities. The confidence interval width for leisure & sport activities remains constant throughout the day.
as: nk +α
θ = m k .
p(a mn =d| ̅ θ → m ,Φ)= ∑K p(a mn =d| ̅ φ → k )p(z mn =k|θ m ), mk k ∑ = K 1 nk m +α k
k=1
The likelihood function of the entire activity sequence is performed as 6.2.2. Activity trajectory patterns analysis
the following: To model the users’ activity chains, we first flatten the user’s activity
sequence with the equal time interval of half an hour based on the
L = ∏M p( ̅ a → | ̅ θ → ,φ)= ∏M ∏Nm p(a | ̅ θ → ,φ) inferred activity types. The time range of the activity sequence is limited
m m mn m
m=1 m=1 n=1 between 6:00 to 22:00 to select key activities, regardless of a large
number of household activities at midnight. After comprehensive
Next, Gibbs Sampling (Wang, 2008) is used to solve the hidden variables consideration of coherence within the topic, differences between topics
̅→ ̅→
zmn , θ m , φ k of LDA. Initially, each activity in the sequence is assigned a in Appendix B and human judgment in Fig. 11A, we eventually assign
topic z0 randomly. We count the number of activity types d appearing the active mobile phone users into six groups and analyze the difference
of their behavior in two aspects: daily travel distance and the number of
under topic z and the number of categories z in the activity sequence of
user m. Then the fully conditional posterior distribution p(zi |Z¬i ,A)can daily visited locations.
be obtained, where Z¬i denotes all zj ’s with j ∕= i and i,j are the activity Fig. 11A illustrates the activity distributions of various groups.
Among the six groups, people in group 0 participate in various activities
indices in the activity sequence. With the probability distribution of the
current activity type in all categories, a new category z1 is assigned to in a balanced and active way and are labeled as active users. Group 1 is
marked as leisure-led with the largest proportion of recreational activ-
the activity based on the probability. The same procedure is repeated
̅→ ities in addition to home activities. Similarly, group 2 labeled as
until the category distrib ̅ u → tion θ m of each activity sequence and the shopping-led has the largest proportion of shopping activities and people
activity type distribution φ k of each category converge. And we can get in group 3 are labeled as work-led users with the largest proportion of
the required parameters and the category of each activity. The proba- work activities. People in group 4 prefer to participate in education-
bility formula of the category of current activity is: related and daily life activities. They may include students and educa-
̅→ → nt +β tors and are labeled as education-led users. Group 5 is purely home-led.
p(z
i
=k|Z¬i ,A)∝
∑
k
V
,¬i t(nk
m,¬i
+α
k
),
As shown in Fig. 11B and C, the daily activity distances of work-led users
nt
k,¬i and education-led users are relatively small in six groups, whereas the
t=1
daily activity distances of entertainment-led users and active users are
where nt is count of activity t in all activities assigned topic k and nk is relatively large. Fig. 11C compares the average daily visit locations of
count of k a ctivity in sequence m assigned k. The subscript ¬i means tha m t ai different groups. The work-led and home-led users visit fewer locations
per day, while active residents visit more.
and zi are not included in the calculation. And the parameter calculation
formula is performed as the following:
7. Discussion and conclusion
nt +β
φ = k t ,
kt ∑V
nt +β With the advent of the big data era, people share their real-time lo-
k t
t=1 cations to gain various types of services, offering an unprecedented
opportunity to understand the population’s mobility behavior and their
12
L. Huang et al. T r a v e l B e h a v i o u r a n d S o c i e ty33(2023)100606
Fig. 14. Box plot of time distribution from 7:00 to 22:00 for each activity type. We randomly select 20 subsets from the mobile data, with each subset
comprising 20% of the total users, and conduct the Bayesian inference model on each subset.
13
L. Huang et al. T r a v e l B e h a v i o u r a n d S o c i e ty33(2023)100606
Fig. 13. Analysis of LDA model. (A) Sensitivity analysis on the LDA model by altering three hyperparameters, including α,β and the number of topics. When α or β
is symmetric, it means using a fixed symmetric prior of 1.0/ num_topics. When α is asymmetric, it uses a fixed normalized asymmetric prior of 1.0/ (topic_index +
sqrt(num_topics)). When the number of topics is within the range of 4 to 7, the coherence score is relatively high. (B) Measurement of differences between pairwise
topics. The bluer the grid on non-diagonal lines, the better, because this indicates a greater degree of differentiation and fewer intersections between the two topics.
Our result demonstrates a high level of dissimilarity between each topic pair.
interaction with the urban functions. With the most large coverage in commuters has three clear peak periods, whereas non-commuters have
population, mobile phone data have been widely used to model human only two concentrated clusters in time; the leisure & sport and shopping of
mobility. However, coarsely localizing users with base stations results in commuters start in the evening whereas the start time of non-commuters
the difficulty of inferring the activity details. Many research analyzed is distributed throughout the day. Next, via comparing the time use of
the LBSN data that have semantic information of their own to infer ac- the active mobile phone users in Shanghai with the American Time Use
tivity types, and few studies explored human activity with mobile phone Survey, we find that the inhabitants in Shanghai work about one hour
data. Most of them focus only on the related semantic information (POIs) and a half longer on average than those in the United States. To un-
such as the attractiveness and the available time. We propose to couple derstand the activities of different groups of people, we adopted a topic
the mobile phone data with the POIs and LBSN data together. In addition model, LDA, to group the users into six categories, reflecting their
to the relationship between the geographical environment and POIs, we various lifestyles. We find that the work-led and home-led users have
also consider the attractiveness change of activities in different time- shorter travel distances and fewer visited locations on average per day
slots. POIs data provides the geolocation of facilities and the LBSN data and the leisure-led and active users show the opposite.
provides the temporal visitation pattern to various types of POIs. To this It is noteworthy that, due to the lack of check-in data of population in
end, we devise a Bayesian model to assign each POI a possibility to visit Shanghai, we leverage the publicly available Foursequare data in Tokyo
for each trip in the mobile phone data. Taking Shanghai as an example, (Yang et al., 2014) as a proxy for the visitation pattern to different
we first extract the trip chains of 1,000,000 anonymized users during categories of POIs. We believe this assumption can be feasible as the
two weeks with the XDR data. Combined with the 570,000 check-in proposed Bayesian method only utilizes the visitation frequency per 10
items and more than 30,000 POIs, we are able to infer the activity min in our framework (as shown in Fig. 5A), and the lifestyle of popu-
type of the active mobile phone users in Shanghai. The validation results lation in Shanghai and Tokyo is quite similar. We will quantitatively
with a real-world check-in data show that our model has a high level of compare the similarity if data in Shanghai is available in future. In
consistency and reconstruction accuracy (around 80%) with real-world addition, although we have considered the temporal pattern of the
human behavior. visitation to different types of facilities, future research can be extended
After inferring the activity types in the users’ trajectories on a large by improving the accuracy of user activity type inference, such as
scale, we proceed to analyse the reconstructed outcomes from different considering the interaction between different activity types and the
aspects. Firstly, we analyze the temporal characteristics of each activity capacity of different facilities or focusing on the study of specific activity
type and the average daily time use. We observe evident differences schedules, such as commuting which are important trips during
between commuters and non-commuters. For example, the drink & eat of workdays.
Appendix A. Performance of Bayesian inference model
To demonstrate the performance of our Bayesian inference model, we randomly select 20 subsets from the original data, each containing 20% of
mobile users, conduct the Bayesian inference model on each subset, and calculate confidence intervals for each activity type. A wider confidence
interval indicates that there is more uncertainty in the model’s reconstruction results. Since home and work activity types are derived from daily life
habits in 4.2 rather than inferred from Bayesian model, we mainly focus on the remaining activity types.
In Fig. 12 and Fig. 14, we can see that regardless of whether the fraction of shopping activities is high or low, it has the narrowest confidence
intervals, indicating that the inferred results for shopping activities are the most stable. Other than that, daily life and education activities have narrower
confidence intervals at night than during the day while drink & eat activities are the opposite in Fig. 12. The confidence interval width for transport
activities is similar throughout the day.
14
L. Huang et al. T r a v e l B e h a v i o u r a n d S o c i e ty33(2023)100606
Appendix B. Sensitivity analysis of LDA model
We perform a sensitivity analysis on the LDA model by altering its hyperparameters, including α,β, and the number of topics, in order to evaluate
their impacts on the model’s performance. The number of topics is a crucial hyperparameter in LDA, as tailoring this parameter can determine the
balance between fit and generalization. Hyperparameters α and β regulate the sparsity of document and topic distributions. To conduct our study, we
examined six different α values (0.001, 0.031, 0.061, 0.091, ‘symmetric’, ‘asymmetric’), five β values (0.001, 0.031, 0.061, 0.091, ‘symmetric’), and
ten distinct sets of topic numbers (ranging from 1 to 10). The LDA model’s performance is evaluated by the UMASS coherence score (Ro¨der et al.,
2015) which measures the degree of semantic similarity between pairs of words within a chosen topic. A higher coherence score indicates that the
topics generated by the LDA model have a higher degree of interpretability and represent meaningful themes within the corpus.
Our findings, as presented in Fig. 13A, indicate that despite varying α and β values, the trend of coherence score changes is basically consistent.
Specifically, when the number of topics is relatively low, coherence scores are similarly low. Once the number of topics exceeds 4, the change in
coherence score tends to stabilize. But when the number of topics is too large, the coherence value actually decreases. Based on these results, as well as
our own subjective assessment in Fig. 11A, we determine that a classification result of six topics produces a favorable LDA outcome.
Furthermore, in addition to measuring the coherence score within the topic, we also use Hellinger distance (Arora et al., 2013) to measure the
differences between the six types of topics. The result is demonstrated in Fig. 13B, with the colors of the grid representing the degree of correlation
between the vertical and horizontal topics. Our results show a high degree of difference between each topic pair since all grid colors except diagonal
are blue.
References Huang, Q., Wong, D.W., 2016. Activity patterns, socioeconomic status and urban spatial
structure: what can social media data tell us? Int. J. Geograph. Inform. Sci. 30 (9),
1873–1898.
Aleta, A., Martin-Corral, D., Piontti, Y., et al., 2020. Modelling the impact of testing,
Jain, A., Murty, M., Flynn, P., 1999. Estimating origin-destination flows using mobile
contact tracing and household quarantine on second waves of covid-19. Nat. Human phone location data. ACM Comput. Surv. 31 (3), 264–323.
Behav. 4 (9), 964–971. Jiang, S., Fiore, G.A., Yang, Y., Ferreira Jr, J., Frazzoli, E., and Gonza´lez, M.C. (2013). A
Arora, S., Ge, R., Halpern, Y., Mimno, D., Moitra, A., Sontag, D., Wu, Y., Zhu, M., 2013.
review of urban computing for mobile phone traces: current methods, challenges and
A practical algorithm for topic modeling with provable guarantees. In: International
opportunities. In Proceedings of the 2nd ACM SIGKDD international workshop on
conference on machine learning. PMLR, pp. 280–288. Urban Computing, pp. 1–9.
Batty, M., Axhausen, K.W., Giannotti, F., Pozdnoukhov, A., Bazzani, A., Wachowicz, M., Jiang, S., Yang, Y., Gupta, S., Veneziano, D., Athavale, S., Gonza´lez, M.C., 2016. The
Ouzounis, G., Portugali, Y., 2012. Smart cities of the future. Eur. Phys. J. Special
timegeo modeling framework for urban mobility without travel surveys. Proc. Nat.
Topics 214 (1), 481–518. Acad. Sci. 113 (37), E5370–E5378.
Blei, D.M., Ng, A.Y., Jordan, M.I., 2003. Latent dirichlet allocation. J. Mach. Learn. Res. Jin, X., Long, Y., Sun, W., Lu, Y., Yang, X., Tang, J., 2017. Evaluating cities’ vitality and
3, 993–1022. identifying ghost cities in china with emerging geographical data. Cities 63, 98–109.
Dianping. https://www.dianping.com (2022). [Online; accessed 2022].
Kraemer, M.U., Yang, C.-H., Gutierrez, B., Wu, C.-H., Klein, B., Pigott, D.M., Du
Bureau of Statistics of Shanghai (2015). The Third Economic Census of Shanghai.
Plessis, L., Faria, N.R., Li, R., Hanage, W.P., et al., 2020. The effect of human
[Online; accessed 1-December-2020].
mobility and control measures on the covid-19 epidemic in china. Science 368
Cai, G., Lee, K., and Lee, I. (2016). Mining semantic sequential patterns from geo-tagged (6490), 493–497.
photos. In Proceedings of the 2016 49th Hawaii International Conference on System
Lenormand, M., Picornell, M., Cantú-Ros, O.G., Louail, T., Herranz, R., Barthelemy, M.,
Sciences (HICSS), pp. 2187–2196.
Frías-Martínez, E., San Miguel, M., Ramasco, J.J., 2015. Comparing and modelling
Calafiore, A., Palmer, G., Comber, S., Arribas-Bel, D., Singleton, A., 2021. A geographic
land use organization in cities. Royal Soc. Open Sci. 2 (12), 150449.
data science framework for the functional and contextual analysis of human
Li, Q., Zheng, Y., Xie, X., Chen, Y., Liu, W., and Ma, W.-Y. (2008). Mining user similarity
dynamics within global cities. Comput. Environ. Urban Syst. 85, 101539.
based on location history. In Proceedings of the 16th ACM SIGSPATIAL international
Chang, S., Pierson, E., Koh, P.W., Gerardin, J., Redbird, B., Grusky, D., Leskovec, J., conference on Advances in geographic information systems, pp. 1–10.
2020. Mobility network models of covid-19 explain inequities and inform reopening.
Liu, X., Huang, Q., Gao, S., Xia, J., 2021. Activity knowledge discovery: Detecting
Nature 1–8.
De Nadai, M., Xu, Y., Letouz´e, E., Gonz´alez, M.C., Lepri, B., 2020. Socio-economic, built collective and individual activities with digital footprints and open source
geographic data. Comput. Environ. Urban Syst. 85, 101551.
environment, and mobility conditions associated with crime: a study of multiple
Long, Y., 2016. Redefining chinese city system with emerging new data. Appl. Geogr. 75,
Di Cl
c
e
it
m
ie
e
s
n
.
t
S
e
c
,
i
R
.
.
R
,
e
L
p
u
.
e n
1
g
0
o
(
-
1
O
)
r
,
o
1
z
–
,
1
M
2
.
.
, Travizano, M., Xu, S., Vaitla, B., Gonz´alez, M.C., 2018.
36–48.
Long, Y., Zhang, Y., Cui, C., 2012. Identifying commuting pattern of beijing using bus
Sequences of purchases in credit card data reveal lifestyles in urban populations. smart card data. Acta Geographica Sinica 67 (10), 1339–1352.
Nat. Commun. 9 (1), 1–8.
Louail, T., Lenormand, M., Picornell, M., Cantú, O.G., Herranz, R., Frias-Martinez, E.,
Eagle, N., Pentland, A.S., 2009. Eigenbehaviors: Identifying structure in routine. Behav.
Ramasco, J.J., Barthelemy, M., 2015. Uncovering the spatial structure of mobility
Ecol. Sociobiol. 63 (7), 1057–1066. networks. Nature Commun. 6 (1), 1–8.
Ferrari, L., Rosi, A., Mamei, M., and Zambonelli, F. (2011). Extracting urban patterns
McDonald, N.C., 2008. Critical factors for active transportation to school among low-
from location-based social networks. In Proceedings of the 3rd ACM SIGSPATIAL
income and minority students: evidence from the 2001 national household travel
International Workshop on Location-Based Social Networks, pp. 9–16. survey. Am. J. Prevent. Med. 34 (4), 341–344.
Fudolig, M.I.D., Bhattacharya, K., Monsivais, D., Jo, H.-H., Kaski, K., 2020. Link-centric
Mistry, D., Litvinova, M., et al., 2021. Inferring high-resolution human mixing patterns
analysis of variation by demographics in mobile phone communication patterns. for disease modeling. Nat. Commun. 12 (1), 1–12.
PloS one 15 (1), e0227037.
Monsivais, D., Ghosh, A., Bhattacharya, K., Dunbar, R.I., Kaski, K., 2017. Tracking urban
Fudolig, M.I.D., Monsivais, D., Bhattacharya, K., Jo, H.-H., Kaski, K., 2021. Internal
human activity from mobile phone calling patterns. PLoS Comput. Biol. 13 (11),
migration and mobile communication patterns among pairs with strong ties. EPJ
e1005824.
Data Sci. 10 (1), 1–21.
Pan, B., Zheng, Y., Wilkie, D., and Shahabi, C. (2013). Crowd sensing of traffic anomalies
Gao, S., Janowicz, K., Couclelis, H., 2017. Extracting urban functional regions from
based on human mobility and social media. In Proceedings of the 21st ACM
points of interest and human activities on location-based social networks. Trans. GIS
SIGSPATIAL international conference on advances in geographic information
21 (3), 446–467. systems, pp. 344–353.
Goh, S., Lee, K., Park, J.S., Choi, M., 2012. Modification of the gravity model and
Rhee, I., Shin, M., Hong, S., Lee, K., Kim, S.J., Chong, S., 2011. On the levy-walk nature
application to the metropolitan seoul subway system. Phys. Rev. E 86 (2), 026102. of human mobility. IEEE/ACM Trans. Networking 19 (3), 630–643.
Gong, L., Liu, X., Wu, L., Liu, Y., 2016. Inferring trip purposes and uncovering travel Ro¨der, M., Both, A., and Hinneburg, A. (2015). Exploring the space of topic coherence
patterns from taxi trajectory data. Cartogr. Geogr. Inform. Sci. 43 (2), 103–114.
measures. In Proceedings of the eighth ACM international conference on Web search
Hasan, S., Zhan, X., and Ukkusuri, S.V. (2013). Understanding urban human activity and and data mining, pp. 399–408.
mobility patterns using large-scale location-based data from online social media. In
Roy1E, C., Monsivais, D., Bhattacharya, K., Dunbar, R.I., and Kaski, K.
Proceedings of the 2nd ACM SIGKDD international workshop on urban computing, Morningness–eveningness assessment from mobile phone communication analysis.
pp. 1–8.
Sagl, G., Delmelle, E., Delmelle, E., 2014. Mapping collective human activity in an urban
Hu, Q., Bai, G., Wang, S., Ai, M., 2019. Extraction and monitoring approach of dynamic
environment based on mobile phone data. Cartogr. Geogr. Inform. Sci. 41 (3),
urban commercial area using check-in data from weibo. Sustain. Cities Soc. 45, 272–285.
508–521.
Sari Aslam, N., Zhu, D., Cheng, T., Ibrahim, M.R., Zhang, Y., 2020. Semantic enrichment
Hu, S., Gao, S., Wu, L., Xu, Y., Zhang, Z., Cui, H., Gong, X., 2021. Urban function
of secondary activities using smart card data and point of interests: a case study in
classification at road segment level using taxi trajectory data: A graph convolutional london. Ann. GIS 1–13.
neural network approach. Comput. Environ. Urban Syst. 87, 101619.
Sevtsuk, A., Ratti, C., 2010. Does urban mobility have a daily routine? learning from the
aggregate data of mobile networks. J. Urban Technol. 17 (1), 41–60.
15
L. Huang et al. T r a v e l B e h a v i o u r a n d S o c i e ty33(2023)100606
Siła-Nowicka, K., Vandrol, J., Oshan, T., Long, J.A., Demˇsar, U., Fotheringham, A.S., Xu, Y., Çolak, S., Kara, E.C., Moura, S.J., Gonza´lez, M.C., 2018. Planning for electric
2016. Analysis of human mobility patterns from gps trajectories and contextual vehicle needs by coupling charging profiles with urban mobility. Nature Energy 3,
information. Int. J. Geogr. Inform. Sci. 30 (5), 881–906. 484–493.
Spinsanti, L., Celli, F., and Renso, C. (2010). Where you stop is who you are: Xu, Y., Di Clemente, R., Gonz´alez, M.C., 2021. Understanding vehicular routing behavior
understanding people’s activities by places visited. In Proceedings of the 5th with location-based service data. EPJ Data Sci. 10 (1), 1–17.
Workshop on Behaviour Monitoring and Interpretation (BMI’10), pp. Xu, Y., Gonz´alez, M.C., 2017. Collective benefits in traffic during mega events via the use
916907263–1594433898. Citeseer. of information technologies. J. Royal Soc. Interface 14 (129), 20161041.
Tizzoni, M., Bajardi, P., Decuyper, A., King, G.K.K., Schneider, C.M., Blondel, V., Xu, Y., Jiang, S., Li, R., Zhang, J., Zhao, J., Abbar, S., Gonz´alez, M.C., 2019. Unraveling
Smoreda, Z., Gonz´alez, M.C., Colizza, V., 2014. On the use of human mobility environmental justice in ambient PM2.5 exposure in Beijing: A big data approach.
proxies for modeling epidemics. PLoS Comput. Biol. 10 (7), e1003716. Comput. Environ. Urban Syst. 75, 12–21.
Tu, W., Cao, J., Yue, Y., Shaw, S.-L., Zhou, M., Wang, Z., Chang, X., Xu, Y., Li, Q., 2017. Xu, Y., Olmos, L.E., Abbar, S., Gonz´alez, M.C., 2020. Deconstructing laws of accessibility
Coupling mobile phone and social media data: A new approach to understanding and facility distribution in cities. Sci. Adv. 6 (37) eabb4112.
urban functions and diurnal patterns. Int. J. Geogr. Inform. Sci. 31 (12), 2331–2358. Yang, D., Zhang, D., Zheng, V.W., Yu, Z., 2014. Modeling user activity preference by
Tu, W., Santi, P., He, X., Zhao, T., Liu, X., Li, Q., Wallington, T.J., Keoleian, G.A., leveraging user spatial temporal characteristics in lbsns. IEEE Trans. Syst., Man,
Ratti, C., 2020. Understanding ridesourcing mobility and the future of Cybern.: Syst. 45 (1), 129–142.
electrification: a comparative study in beijing. J. Urban Technol. 1–20. Yin, L., Lin, N., Song, X., Mei, S., Shaw, S.-L., Fang, Z., Li, Q., Li, Y., Mao, L., 2020. Space-
U.S. Bureau of Labor Statistics (2009). American Time Use Survey. [Online; accessed 1- time personalized short message service (sms) for infectious disease control–policies
December-2020]. for precise public health. Appl. Geogr. 114, 102103.
Wang, F., 2012. Measurement, optimization, and impact of health care accessibility: a Yuan, Y., Raubal, M., 2016. Analyzing the distribution of human activity space from
methodological review. Ann. Assoc. Am. Geogr. 102 (5), 1104–1112. mobile phone usage: an individual and urban-oriented study. Int. J. Geogr. Inform.
Wang, Y., 2008. Distributed gibbs sampling of latent topic models: The gritty details. Sci. 30 (8), 1594–1621.
Course Notes, Agustus. Zhao, K., Musolesi, M., Hui, P., Rao, W., Tarkoma, S., 2015. Explaining the power-law
Widhalm, P., Yang, Y., Ulm, M., Athavale, S., Gonza´lez, M.C., 2015. Discovering urban distribution of human mobility through transportation modality decomposition. Sci.
activity patterns in cell phone data. Transportation 42 (4), 597–623. Rep. 5 (1), 1–7.
Xie, K., Deng, K., and Zhou, X. (2009). From trajectories to activities: a spatio-temporal Zhao, X., Li, Z., Zhang, Y., Lv, Y., 2020. Discover trip purposes from cellular network data
join approach. In Proceedings of the 2009 International Workshop on Location Based with topic modelling. IEEE Intell. Transp. Syst. Mag.
Social Networks, pp. 25–32. Zhao, Z., Koutsopoulos, H.N., and Zhao, J. (2018). Discovering latent activity patterns
from human mobility. In Proc. 7th ACM SIGKDD Int. Workshop Urban Computing
(UrbComp’18), pp. 1–9.
16

=== INSTRUCTIONS ===

0. PROFESSIONAL TONE REQUIREMENTS:
   - Begin directly with the paper title or content - NO conversational openings
   - Do NOT use phrases like: 'Okay, here's...', 'Here's a summary...',
     'Let me summarize...', 'I'll extract...', or similar conversational language
   - Start immediately with substantive content in formal academic tone
   - Example BAD: 'Okay, here's a summary of the paper...'
   - Example GOOD: 'This paper investigates [topic]...'

1. Start with exact title: "Reconstructing human activities via coupling mobile phone data with location-based social networks"

2. EXTRACT QUOTES:
   - Extract 10-15 direct quotes from the paper that support key claims
   - QUOTE EXTRACTION AND FORMATTING:
     * Extract quotes VERBATIM from the paper text - do NOT modify or "correct" them
     * Extract quotes exactly as they appear in the source text
     * Preserve all aspects of the quote exactly as written, including spacing
     * Use proper quotation marks: "quote text" (double quotes)
     * CRITICAL: Only extract quotes that actually appear in the paper text
     * Do NOT generate, invent, or "fix" quotes - extract them exactly as written
   - QUOTE FORMATTING STANDARD:
     * Attribution format: 'The authors state: "quote text"' OR 'According to the paper: "quote text"'
     * Vary attribution phrases to avoid repetition (use: 'The authors state', 'They note',
       'The paper argues', 'According to the research', 'The study demonstrates')
     * Include section context when available: 'In the Introduction, the authors state: "quote text"'
     * Ensure proper spacing around quotes and punctuation
   - Search the full paper text to find relevant quotes
   - Each quote must be verbatim from the paper text (with spacing normalized)

3. IDENTIFY CLAIMS:
   - Identify the main claims and arguments made by the authors
   - State each claim clearly and support it with quotes from the paper
   - Distinguish between primary claims and supporting arguments

4. SUMMARIZE KEY FINDINGS:
   - Summarize the key findings with specific numbers, metrics, and results
   - Include quantitative data: percentages, statistics, measurements
   - Extract numerical results from the results section
   - Present findings with supporting evidence from the paper

5. DESCRIBE METHODS:
   - Describe the methodology, experimental setup, and approach used
   - Include details about: algorithms, procedures, experimental design
   - Explain how the research was conducted
   - Extract specific methodological details from the methods section

6. PRESENT RESULTS:
   - Present the results with quantitative data and statistical significance
   - Include specific numbers, tables, figures mentioned in the paper
   - Extract results from the results section with exact values
   - Support results with quotes or data from the paper

7. NO REPETITION - CRITICAL REQUIREMENT (ENHANCED):
   - CRITICAL: Before writing EACH sentence, check: 'Have I already said this exact idea?'
   - If you've already stated an idea, DO NOT repeat it - move to the next unique point
   - Each sentence must be COMPLETELY UNIQUE - no duplicate ideas, even with different words
   - Each claim appears EXACTLY ONCE - if you've stated it, move to the next unique point
   - Each paragraph must be COMPLETELY UNIQUE - no duplicate paragraphs
   - Do NOT repeat the same sentence, even with slight variations or word changes
   - Do NOT repeat paragraphs or sections - each section must have unique content
   - Each claim should appear only ONCE in the entire summary
   - Vary attribution phrases: use 'The authors state', 'They note', 'The paper argues',
     'According to the research', 'The study demonstrates' - do NOT repeat the same phrase
   - If you find yourself writing similar content, STOP immediately and write something completely different
   - Before each sentence, ask: 'Have I already said this?' If yes, write something new
   - Vary your language: use synonyms, different sentence structures, different perspectives
   - REPETITION CHECKLIST: After writing each sentence, verify it's not a duplicate of any previous sentence

   EXAMPLES OF WHAT NOT TO DO:
   ❌ BAD: 'The authors state: "X". The authors state: "Y". The authors state: "Z".'
   ✅ GOOD: 'The authors state: "X". They further note: "Y". The paper argues: "Z".'

   ❌ BAD: Repeating the same claim 3+ times with slight variations
   ✅ GOOD: State each claim once, then move to the next unique point

8. STRUCTURE:
   - Use markdown headers: ### Overview, ### Methodology, ### Results, ### Discussion
   - Target length: 1000-1500 words
   - Ensure all requested elements (quotes, claims, findings, methods, results) are included
