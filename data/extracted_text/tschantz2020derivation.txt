Appendix 2
In what follows, we formally describe the relationship between free energyF(φ,o) and expected free energyGτ(φτ,ut).
To help clarify this relationship, we rewrite free energy as Ft(φt,ot), where subscript xt implies the value at time t,
thus making explicit the fact that free energy corresponds to the current time t, and where (following Appendix 1):
Ft(φt,ot) =EQ(xt|φt)[ln Q(xt|φt) −ln P(xt,ot)] (1)
Expected free energy Gτ(φτ,ut) differs from the free energy functional in equation 1 in three respects. First, it looks
to quantify the free energy that is expected to occur at some future time τ. We can attempt to deﬁne the free energy for
time τ as:
Fτ(φτ,oτ) =EQ(xτ|φτ)[ln Q(xτ|φτ) −ln P(oτ,xτ)] (2)
However, equation 2 poses a problem. The free energy at the current time point Ft(φt,ot) is a function of observations
ot because the observations at time tare known. In contrast, the observations at time τ are unknown, meaning that the
free energy at time τ cannot be a function of (unobserved) observations. Instead, beliefs over observations at time τ are
required to evaluate free energy at the future time point τ. By assuming that observations oτ depend on the unknown
variables xτ (which will be formalized once the generative model has been deﬁned), we can introduce a distribution (or
beliefs) over future observations Q(oτ|xτ,φτ). Free energy at future time τ can then be evaluated under the expectation
of this distribution:
Fτ(φτ) =EQ(xτ|φτ)
[
EQ(oτ|xτ,φτ)[ln Q(xτ|φτ) −ln P(xτ,oτ)]
]
= EQ(oτ,xτ|φτ)
[
ln Q(xτ|φτ) −ln P(xτ,oτ)
] (3)
Finally, we note that the functional purpose of expected free energy is to quantify the free energy that is expected to
occur at time τ given the execution of some particular action (or sequence of actions). We can therefore specify the free
energy that is expected to occur at time τ given some control state ut by conditioning all of the distributions in equation
3 on ut:
Fτ(φτ,ut) =EQ(oτ,xτ|ut,φτ)[ln Q(xτ|ut,φτ) −ln P(xτ,oτ|ut)] (4)
This equation deﬁnes the expected free energy for time τ given control state ut, which we denote Gτ(φτ,ut), i.e.
Gτ(φτ,ut) =Fτ(φτ,ut). Equation 4 is the form of expected free energy used in the main text.